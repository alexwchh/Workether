<app-navbar></app-navbar>
<app-tab-bar [projectId]="projectId" [projectName]="projectName"></app-tab-bar>
<div class="agendas-container">
  <div class="events-header">
    <div class="card event-create-handler">
      <mat-expansion-panel #expd="matExpansionPanel">
        <mat-expansion-panel-header>

          <mat-panel-description class="add-agenda">
              {{'AGENDA_PAGE.ADD_AGENDA' | translate}}
          </mat-panel-description>

        </mat-expansion-panel-header>
        <div class="input-wrap">
          <mat-icon class="add-agenda-icon mat-18">add_circle</mat-icon>
          <span class="label task-id-label"></span>
          <input class="agenda-title-input" type="text" placeholder="click to add or edit agenda" [(ngModel)]="addedAgenda" [value]=addedAgenda>
        </div>
        <div class="component-mount due-date">
            <span class="agenda-date-picker-span">{{'AGENDA_PAGE.FROM' | translate}}</span>
            <angular2-date-picker class="agenda-date-picker range-from" [(ngModel)]="fromDate" [settings]="settings"></angular2-date-picker>
            <span class="agenda-date-picker-span margin-left-10">{{'AGENDA_PAGE.TO' | translate}}</span>
            <angular2-date-picker class="agenda-date-picker range-to" [(ngModel)]="toDate" [settings]="settings"></angular2-date-picker>

          <button mat-icon-button class="repeatBtn">
            <mat-icon class="mat-18 mat-icon-grey">settings_backup_restore</mat-icon>
          </button>
          <mat-form-field class="repeatSelect">
            <mat-select class="select-repeat-items" placeholder="Set Repeat" [(value)]="repeatValue">
              <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
              <mat-option value="1">{{'EDIT_TASK.PER_DAR' | translate}}</mat-option>
              <mat-option value="2">{{'EDIT_TASK.PER_WEEK' | translate}}</mat-option>
              <mat-option value="3">{{'EDIT_TASK.PER_MONTH' | translate}}</mat-option>
              <mat-option value="4">{{'EDIT_TASK.PER_YEAR' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
          <button mat-icon-button class="notiBtn">
            <mat-icon class="mat-18 mat-icon-grey">alarm</mat-icon>
          </button>
          <mat-form-field class="notiSelect">
            <mat-select class="select-noti-items" placeholder="Set Reminder" [(value)]="remindValue">
              <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
              <mat-option value="1">{{'EDIT_TASK.DISABLE' | translate}}</mat-option>
              <mat-option value="2">{{'EDIT_TASK.ONTIME' | translate}}</mat-option>
              <mat-option value="3">{{'EDIT_TASK.5_MIN_EARLY' | translate}}</mat-option>
              <mat-option value="4">{{'EDIT_TASK.30_MIN_EARLY' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
        </div>

        <mat-action-row class="panel-action">
          <button mat-button (click)="addAgenda()">{{'GLOBEL.SAVE' | translate}}</button>
        </mat-action-row>
      </mat-expansion-panel>
    </div>
  </div>

  <div class="events-card-wrap">
    <header class="margin-bottom-15">
      <span class="before-panel flex-start">{{'AGENDA_PAGE.TODAY' | translate}}</span>
      <span class="divider">路</span>
      <span class="date-header">{{date| date:"dd MMMM, E"}}</span>
    </header>
    <mat-accordion>
      <mat-expansion-panel *ngFor="let agenda of todayAgenda" #expd="matExpansionPanel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{agenda.agenda_start_time | date:"HH:mm"}}~{{agenda.agenda_end_time | date:"HH:mm"}}
          </mat-panel-title>
          <mat-panel-description>
            {{agenda.agenda_title}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="input-wrap">

          <mat-checkbox class="check-box non-checkable hinted" color="primary" [(ngModel)]="agenda.agenda_isComplete" (click)=deleteAgenda(agenda)></mat-checkbox>
          <span class="label task-id-label"></span>
          <input class="agenda-title-input" type="text" placeholder="click to add or edit agenda" [(ngModel)]="agenda.agenda_title" [value]="agenda.agenda_title">
        </div>
        <div class="component-mount due-date">
          <span class="agenda-date-picker-span">{{'AGENDA_PAGE.FROM' | translate}}</span>
          <angular2-date-picker class="agenda-date-picker range-from" [(ngModel)]="agenda.agenda_start_time" [settings]="settings"></angular2-date-picker>
          <span class="agenda-date-picker-span margin-left-10">{{'AGENDA_PAGE.TO' | translate}}</span>
          <angular2-date-picker class="agenda-date-picker range-to" [(ngModel)]="agenda.agenda_end_time" [settings]="settings"></angular2-date-picker>

          <button mat-icon-button class="repeatBtn">
            <mat-icon class="mat-18 mat-icon-grey">settings_backup_restore</mat-icon>
          </button>
          <mat-form-field class="repeatSelect">
            <mat-select class="select-repeat-items" placeholder="Set Repeat" [(value)]="agenda.agenda_repeat">
              <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
              <mat-option value="1">{{'EDIT_TASK.PER_DAR' | translate}}</mat-option>
              <mat-option value="2">{{'EDIT_TASK.PER_WEEK' | translate}}</mat-option>
              <mat-option value="3">{{'EDIT_TASK.PER_MONTH' | translate}}</mat-option>
              <mat-option value="4">{{'EDIT_TASK.PER_YEAR' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
          <button mat-icon-button class="notiBtn">
            <mat-icon class="mat-18 mat-icon-grey">alarm</mat-icon>
          </button>
          <mat-form-field class="notiSelect">
            <mat-select class="select-noti-items" placeholder="Set Reminder" [(value)]="agenda.agenda_remind">
              <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
              <mat-option value="1">{{'EDIT_TASK.DISABLE' | translate}}</mat-option>
              <mat-option value="2">{{'EDIT_TASK.ONTIME' | translate}}</mat-option>
              <mat-option value="3">{{'EDIT_TASK.5_MIN_EARLY' | translate}}</mat-option>
              <mat-option value="4">{{'EDIT_TASK.30_MIN_EARLY' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
        </div>

        <mat-action-row class="panel-action">
          <button mat-button (click)="updateAgenda(agenda)">{{'GLOBEL.SAVE' | translate}}</button>
        </mat-action-row>
      </mat-expansion-panel>
    
    </mat-accordion>
  </div>
  <div *ngIf="beforeTodayAgenda.length>0" class="events-card-wrap before-today-agenda">
    <header class="margin-bottom-15">
      <span class="before-panel flex-start">{{'AGENDA_PAGE.BEFORE_TODAY' | translate}}</span>
      <span class="margin-left-15">路</span>
      <button mat-icon-button (click)="toggleBeforeVis()">
        <mat-icon class="mat-18 toggleBtn color-grey-button">{{beforeTodayVisibilityIcon}}</mat-icon>
      </button>
    </header>
    <mat-accordion *ngIf="this.beforeTodayVisibility">
      <mat-expansion-panel *ngFor="let agenda of beforeTodayAgenda" #expd="matExpansionPanel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{agenda.agenda_start_time | date:"MM/dd HH:mm"}}~{{agenda.agenda_end_time | date:"MM/dd HH:mm"}}
          </mat-panel-title>
          <mat-panel-description>
            {{agenda.agenda_title}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="input-wrap">

          <mat-checkbox class="check-box non-checkable hinted" color="primary" [(ngModel)]="agenda.agenda_isComplete" (click)=deleteAgenda(agenda)></mat-checkbox>
          <span class="label task-id-label"></span>
          <input class="agenda-title-input" type="text" placeholder="click to add or edit agenda" [(ngModel)]="agenda.agenda_title" [value]="agenda.agenda_title">
        </div>
        <div class="component-mount due-date">
          <span class="agenda-date-picker-span">{{'AGENDA_PAGE.FROM' | translate}}</span>
          <angular2-date-picker class="agenda-date-picker range-from" [(ngModel)]="agenda.agenda_start_time" [settings]="settings"></angular2-date-picker>
          <span class="agenda-date-picker-span margin-left-10">{{'AGENDA_PAGE.TO' | translate}}</span>
          <angular2-date-picker class="agenda-date-picker range-to" [(ngModel)]="agenda.agenda_end_time" [settings]="settings"></angular2-date-picker>

          <button mat-icon-button class="repeatBtn">
            <mat-icon class="mat-18 mat-icon-grey">settings_backup_restore</mat-icon>
          </button>
          <mat-form-field class="repeatSelect">
            <mat-select class="select-repeat-items" placeholder="Set Repeat" [(value)]="agenda.agenda_repeat">
                <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
                <mat-option value="1">{{'EDIT_TASK.PER_DAR' | translate}}</mat-option>
                <mat-option value="2">{{'EDIT_TASK.PER_WEEK' | translate}}</mat-option>
                <mat-option value="3">{{'EDIT_TASK.PER_MONTH' | translate}}</mat-option>
                <mat-option value="4">{{'EDIT_TASK.PER_YEAR' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
          <button mat-icon-button class="notiBtn">
            <mat-icon class="mat-18 mat-icon-grey">alarm</mat-icon>
          </button>
          <mat-form-field class="notiSelect">
            <mat-select class="select-noti-items" placeholder="Set Reminder" [(value)]="agenda.agenda_remind">
                <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
                <mat-option value="1">{{'EDIT_TASK.DISABLE' | translate}}</mat-option>
                <mat-option value="2">{{'EDIT_TASK.ONTIME' | translate}}</mat-option>
                <mat-option value="3">{{'EDIT_TASK.5_MIN_EARLY' | translate}}</mat-option>
                <mat-option value="4">{{'EDIT_TASK.30_MIN_EARLY' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
        </div>

        <mat-action-row class="panel-action">
          <button mat-button (click)="updateAgenda(agenda)">{{'GLOBEL.SAVE' | translate}}</button>
        </mat-action-row>
      </mat-expansion-panel>
    
    </mat-accordion>
  </div>
  <div *ngIf="futureAgenda.length>0" class="events-card-wrap before-today-agenda">
    <header class="margin-bottom-15">
      <span class="before-panel flex-start">{{'AGENDA_PAGE.FUTURE' | translate}}</span>
      <span class="margin-left-15">路</span>
      <button mat-icon-button (click)="toggleFutureVis()">
        <mat-icon class="mat-18 toggleBtn color-grey-button">{{futureVisibilityIcon}}</mat-icon>
      </button>
    </header>
    <mat-accordion *ngIf="this.futureVisibility">
      <mat-expansion-panel *ngFor="let agenda of futureAgenda" #expd="matExpansionPanel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{agenda.agenda_start_time | date:"MM/dd HH:mm"}}~{{agenda.agenda_end_time | date:"MM/dd HH:mm"}}
          </mat-panel-title>
          <mat-panel-description>
            {{agenda.agenda_title}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="input-wrap">

          <mat-checkbox class="check-box non-checkable hinted" color="primary" [(ngModel)]="agenda.agenda_isComplete" (click)=deleteAgenda(agenda)></mat-checkbox>
          <span class="label task-id-label"></span>
          <input class="agenda-title-input" type="text" placeholder="click to add or edit agenda" [(ngModel)]="agenda.agenda_title" [value]="agenda.agenda_title">
        </div>
        <div class="component-mount due-date">
            <span class="agenda-date-picker-span">{{'AGENDA_PAGE.FROM' | translate}}</span>
            <angular2-date-picker class="agenda-date-picker range-from" [(ngModel)]="agenda.agenda_start_time" [settings]="settings"></angular2-date-picker>
          <span class="agenda-date-picker-span margin-left-10">To</span>
          <angular2-date-picker class="agenda-date-picker range-to" [(ngModel)]="agenda.agenda_end_time" [settings]="settings"></angular2-date-picker>

          <button mat-icon-button class="repeatBtn">
            <mat-icon class="mat-18 mat-icon-grey">settings_backup_restore</mat-icon>
          </button>
          <mat-form-field class="repeatSelect">
            <mat-select class="select-repeat-items" placeholder="Set Repeat" [(value)]="agenda.agenda_repeat">
                <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
                <mat-option value="1">{{'EDIT_TASK.PER_DAR' | translate}}</mat-option>
                <mat-option value="2">{{'EDIT_TASK.PER_WEEK' | translate}}</mat-option>
                <mat-option value="3">{{'EDIT_TASK.PER_MONTH' | translate}}</mat-option>
                <mat-option value="4">{{'EDIT_TASK.PER_YEAR' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
          <button mat-icon-button class="notiBtn">
            <mat-icon class="mat-18 mat-icon-grey">alarm</mat-icon>
          </button>
          <mat-form-field class="notiSelect">
            <mat-select class="select-noti-items" placeholder="Set Reminder" [(value)]="agenda.agenda_remind">
                <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
                <mat-option value="1">{{'EDIT_TASK.DISABLE' | translate}}</mat-option>
                <mat-option value="2">{{'EDIT_TASK.ONTIME' | translate}}</mat-option>
                <mat-option value="3">{{'EDIT_TASK.5_MIN_EARLY' | translate}}</mat-option>
                <mat-option value="4">{{'EDIT_TASK.30_MIN_EARLY' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
        </div>

        <mat-action-row class="panel-action">
          <button mat-button (click)="updateAgenda(agenda)">{{'GLOBEL.SAVE' | translate}}</button>
        </mat-action-row>
      </mat-expansion-panel>
    
    </mat-accordion>
  </div>
  
  <div class="events-card-wrap past-agenda">
    <header class="margin-bottom-15">
      <span class="before-panel flex-start">{{'AGENDA_PAGE.PAST' | translate}}</span>
      <span class="margin-left-15">路</span>
      <button mat-icon-button (click)="togglePastVisibility()">
        <mat-icon class="mat-18 toggleBtn color-grey-button">{{visibilityIcon}}</mat-icon>
      </button>
    </header>
    <mat-accordion *ngIf="this.pastVisibility">
      <mat-expansion-panel *ngFor="let agenda of pastAgenda" #expd="matExpansionPanel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{agenda.agenda_start_time | date:"MM/dd HH:mm"}}~{{agenda.agenda_end_time | date:"MM/dd HH:mm"}}
          </mat-panel-title>
          <mat-panel-description>
            {{agenda.agenda_title}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="input-wrap">

          <mat-checkbox class="check-box non-checkable hinted" color="primary" [(ngModel)]="agenda.agenda_isComplete" (click)=deleteAgenda(agenda)></mat-checkbox>
          <span class="label task-id-label"></span>
          <input class="agenda-title-input" type="text" placeholder="click to add or edit agenda" [(ngModel)]="agenda.agenda_title" [value]="agenda.agenda_title">
        </div>
        <div class="component-mount due-date">
            <span class="agenda-date-picker-span">{{'AGENDA_PAGE.FROM' | translate}}</span>
            <angular2-date-picker class="agenda-date-picker range-from" [(ngModel)]="agenda.agenda_start_time" [settings]="settings"></angular2-date-picker>
            <span class="agenda-date-picker-span margin-left-10">{{'AGENDA_PAGE.TO' | translate}}</span>
            <angular2-date-picker class="agenda-date-picker range-to" [(ngModel)]="agenda.agenda_end_time" [settings]="settings"></angular2-date-picker>

          <button mat-icon-button class="repeatBtn">
            <mat-icon class="mat-18 mat-icon-grey">settings_backup_restore</mat-icon>
          </button>
          <mat-form-field class="repeatSelect">
            <mat-select class="select-repeat-items" placeholder="Set Repeat" [(value)]="agenda.agenda_repeat">
                <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
                <mat-option value="1">{{'EDIT_TASK.PER_DAR' | translate}}</mat-option>
                <mat-option value="2">{{'EDIT_TASK.PER_WEEK' | translate}}</mat-option>
                <mat-option value="3">{{'EDIT_TASK.PER_MONTH' | translate}}</mat-option>
                <mat-option value="4">{{'EDIT_TASK.PER_YEAR' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
          <button mat-icon-button class="notiBtn">
            <mat-icon class="mat-18 mat-icon-grey">alarm</mat-icon>
          </button>
          <mat-form-field class="notiSelect">
            <mat-select class="select-noti-items" placeholder="Set Reminder" [(value)]="agenda.agenda_remind">
                <mat-option value="0">{{'EDIT_TASK.NONE' | translate}}</mat-option>
                <mat-option value="1">{{'EDIT_TASK.DISABLE' | translate}}</mat-option>
                <mat-option value="2">{{'EDIT_TASK.ONTIME' | translate}}</mat-option>
                <mat-option value="3">{{'EDIT_TASK.5_MIN_EARLY' | translate}}</mat-option>
                <mat-option value="4">{{'EDIT_TASK.30_MIN_EARLY' | translate}}</mat-option>

            </mat-select>
          </mat-form-field>
        </div>

        <mat-action-row class="panel-action">
          <button mat-button (click)="updateAgenda(agenda)">{{'GLOBEL.SAVE' | translate}}</button>
        </mat-action-row>
      </mat-expansion-panel>
    
    </mat-accordion>
  </div>
</div>